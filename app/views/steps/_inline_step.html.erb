<div class="inline-step">
  <div class="step-header">
    <div class="step-collapse">
      <span class="fas fa-chevron-up"></span>
    </div>
    <div class="step-position"><%= step.position + 1 %></div>
    <div class="step-name">
      <%= render partial: "shared/inline_editing",
                 locals: { 
                    initial_value: step.name,
                    local_config: {
                      name: "step_name_#{step.id}",
                      field_to_udpate: 'name',
                      params_group: 'step',
                      path_to_update: update_name_step_path(step.id)
                    }
                  } %>    
    </div>
    <div class="step-actions fix-block">
      <span class="fas fa-plus-circle"></span>
      <span class="fas fa-arrow-up"></span>
      <span class="fas fa-arrow-down"></span>
      <span class="fas fa-ellipsis-h"></span>
    </div>
  </div>
  <div class="step-body">
    <div class="step-description">
      <%= render partial: "shared/tiny_mce_editor",
                 locals: { 
                    object: step,
                    update_url: update_description_step_path(step.id),
                    field: :description
                  } %>
    </div>
    <div class="step-checklists"
         data-reorder-url="<%= reorder_step_checklists_path(step.id) %>"
    >
      <% if step.checklists.any? %>
        <% step.checklists.order(:position).each do |checklist| %>
          <%= render partial: 'steps/inline_step/checklist', locals: {
            checklist: checklist,
            step: step
        } %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>